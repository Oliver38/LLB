@{
    Layout = "_LayoutMain";
}




<div class="card">
    <div class="card-body">
        <h5 class="card-title">View Internal User</h5>
        <div class="card-header">
            <div class="row center">
                <span class="text-success">@TempData["success"]</span>
                <span class="text-danger">@TempData["error"]</span>
            </div>
            <div class="row">
                @*<form class="row g-3" method="post" action="/Admin/InternalUsers">

                        <div class="col-md-6">

                            <select id="inputState" name="role" class="form-select">
                                <option selected value="">Select Role</option>
                                @foreach (var role in ViewBag.Roles)
                                {
                                    <option value="@role.Name">@role.Name</option>

                                }


                            </select>
                        </div>
                        <div class="col-md-6">
                            <input type="submit" class="btn btn-primary form-control" value="Search" />
                        </div>
                    </form><!-- End Multi Columns Form -->*@

            </div>


            <div class="card-body">
                

                <table class="table table-responsive table-borderless datatable">
                    <thead>
                        <tr>






                            <th colspan="2">Action</th>
                        </tr>
                    </thead>
                    <tbody>


                        <tr>
                            <th scope="col">#</th>
                            <th scope="row"><a href="/Admin/ViewUser?Id=@ViewBag.UserDetails .Id">View</a></th>
                        </tr>
                        <tr>
                            <th scope="col">Name</th>
                            <td>@ViewBag.UserDetails.Name</td>
                        </tr>
                        <tr>
                            <th scope="col">Surname</th>
                            <td>@ViewBag.UserDetails.LastName</td>
                        </tr>
                        <tr>
                            <th scope="col">User Status</th>
                            <td>
                                @if (ViewBag.UserDetails.IsActive == true)
                                {<span class="badge bg-success">Active</span> }
                                else
                                {<span class="badge bg-danger">Blocked</span>}
                            </td>


                        </tr>

                        <tr>
                            <th scope="col">Leave Status</th>

                            <td>@ViewBag.UserDetails.LeaveStatus</td>

                        </tr>


                        <tr>

                            <th>Roles</th>
                            <td>@foreach (var role in ViewBag.UserRole)
                            {<p>@role </p>}</td>
                        </tr>
                        <tr>

                            <td>
                                <a href="/Accountant/Verify?ApplicationId=12345" class="btn btn-primary">Send On Leave</a>
                            </td>
                            <td>
                                <a href="/Accountant/Verify?ApplicationId=12345" class="btn btn-primary">Reset Password</a>
                            </td>
                            <td>
                                <button data-bs-toggle="modal" data-bs-target="#changeRole" class="btn btn-primary">Change Role</button>
                            </td>


                        </tr>



                    </tbody>
                </table>
            </div>
        </div>


    </div>
</div>






<div class="modal fade" id="changeRole" tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Change Role</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">



                <form class="row g-3" method="post" action="/Admin/ChangeRole">

                <input type="hidden" name="id" value="@ViewBag.UserDetails.Id" />
                    <div class="col-md-12">

                        <select id="inputState" name="oldrole" class="form-select">
                            <option selected value="">From Which Role</option>
                            @foreach (var role in ViewBag.UserRole)
                            {
                                <option value="@role">@role</option>

                            }


                        </select>


                    </div>
                    <div class="col-md-12">

                        <select id="inputState" name="newrole" class="form-select">
                            <option selected value="">Select Role</option>
                            @foreach (var arole in ViewBag.AllRoles)
                            {
                                <option value="@arole.Name">@arole.Name</option>

                            }


                        </select>
                    </div>
                    <div class="col-md-6">
                        <input type="submit" class="btn btn-primary form-control" value="Change Role" />
                    </div>
                </form><!-- End Multi Columns Form -->

            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary">Save changes</button>
            </div>
        </div>
    </div>
</div><!-- End Basic Modal-->


@{
    Layout = "_LayoutMain";
}


<div b-36j9gympe5 class="row">



    <div class="row">
        <div class="card">

            <div class="card-body" id="_step1">
                <div class="card-header">

                    <h5 class="card-title">Applications For Verifications</h5>
                    @*<button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#addDirector">Add Director </button>
                    *@
                </div>




                <div class="row">

                    <table class="table table-responsiveß table-hover table-striped">


                        <thead>
                        <th>Ref#</th>
                        <th>Trading Name </th>
                        <th>Operating Address </th>
                        <th>Application Date </th>
                        <th>License </th>
                        <th>For </th>
                        <th>Status </th>
                        </thead>
                        <tbody>
                            @foreach (var application in ViewBag.Applications)
                            {

                                <tr>
                                    <td>
                                        @application.RefNum
                                    </td>
                                    <td>
                                        @foreach (var outlet in ViewBag.OutletInfo)
                                        {
                                            if (outlet.ApplicationId == application.Id)
                                            {
                                                @outlet.TradingName
                                            }
                                        }
                                    </td>
                                    <td>
                                        @foreach (var outlet in ViewBag.OutletInfo)
                                        {
                                            if (outlet.ApplicationId == application.Id)
                                            {
                                                @outlet.Address
                                            }
                                        }
                                    </td>

                                    <td>@application.ApplicationDate</td>

                                    <td>
                                        @foreach (var licence in ViewBag.License)
                                        {
                                            if (licence.Id == application.LicenseTypeID)
                                            {
                                                @licence.LicenseName
                                            }
                                        }

                                    </td>


                                    <td>
                                        @foreach (var region in ViewBag.Regions)
                                        {
                                            if (region.Id == application.ApplicationType)
                                            {
                                                @region.RegionName
                                            }
                                        }

                                    </td>

                                    <td>
                                        @if (application.Status == "Has Query")
                                        {
                                            <span class="text-warning">@application.Status</span>
                                        }
                                        @if (application.Status == "payment verification")
                                        {
                                            <span class="text-warning">@application.Status</span>
                                        }
                                        else if (application.Status == "submitted")
                                        { <span class="text-success">@application.Status</span>}
                                    else if (application.Status == "verified")
                                    { <span class="text-success">@application.Status</span>}
                                    </td>

                                    <td>
                                        @if (application.Status == "verified")
                                        { }
                                        else if (application.Status == "payment verification")
                                        { }
                                        else
                                        {
                                            <a href="/Verify/Apply?Id=@application.Id" class="btn btn-primary">View</a>
                                        }
                                    </td>


                                </tr>

                            }
                        </tbody>



                    </table>
                </div>






            </div>
        </div>

    </div>






    <div class="row">
        <div class="card">

            <div class="card-body" id="_step1">
                <div class="card-header">

                    <h5 class="card-title">Renewal Applications</h5>
                    @*<button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#addDirector">Add Director </button>
                    *@
                </div>




                <div class="row">

                    <table class="table table-responsiveß table-hover table-striped">


                        <thead>
                            <tr>
                                @*getreninfo.ApplicationId = renapps.ApplicationId;
                                    getreninfo.Id = renapps.Id;
                                    getreninfo.LLBNumber = renapps.LLBNumber;
                                    getreninfo.PreviousExpiry = renapps.PreviousExpiry;
                                    getreninfo.TradingName = reaoutletinfo.TradingName;
                                    getreninfo.Licensetype = licensetype.LicenseName;
                                    getreninfo.LicenseRegion = licenseReg.RegionName;*@

                                <th>Trading Name </th>
                                <th>LLB Number </th>
                                <th>Expiry Date </th>
                                <th>License </th>
                                <th>For </th>
                                <th>Status </th>
                                <th>Action </th>
                            </tr>

                        </thead>
                        <tbody>
                            @foreach (var renewal in ViewBag.Renewals)
                            {

                                <tr>
                                    <td>@renewal.TradingName</td>
                                    <td>@renewal.LLBNumber</td>
                                    <td>@renewal.PreviousExpiry</td>
                                    <td>@renewal.Licensetype </td>
                                    <td>@renewal.LicenseRegion</td>
                                    <td>@renewal.Status</td>
                                    <td><a class="btn btn-primary" href="/Verify/Renewal?Id=@renewal.Id&taskId=@renewal.TaskId"> View Renewal</a></td>


                                </tr>

                            }
                        </tbody>



                    </table>
                </div>






            </div>
        </div>

    </div>









    <div class="row">
        <div class="card">

            <div class="card-body" id="_step1">
                <div class="card-header">

                    <h5 class="card-title"> Renewal Inspection Applications</h5>
                    @*<button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#addDirector">Add Director </button>
                    *@
                </div>




                <div class="row">

                    <table class="table table-responsiveß table-hover table-striped">


                        <thead>
                            <tr>
                                @*renewalinspectiontask.TradingName = outletinfoq.TradingName;
                                    renewalinspectiontask.LLBNumber = appinfoq.LLBNum;
                                    renewalinspectiontask.ApplicationId = applId;
                                    renewalinspectiontask.DateApplied = inspecy.DateApplied;
                                    renewalinspectiontask.Id = inspecy.Id;
                                    renewalinspectiontask.Status = inspecy.Status;
                                    renewalinspectiontask.Service = inspecy.Service;
                                    renewalinspectiontask.LicenseType = licensetype.LicenseName;
                                    renewalinspectiontask.LicenseRegion = licenseregion.RegionName;*@

                                <th>Trading Name </th>
                                <th>LLB Number </th>
                                <th>Application Date </th>
                                <th>Status </th>
                                <th>Service </th>
                                <th>License </th>
                                <th>For </th>

                                <th>Action </th>
                            </tr>

                        </thead>
                        <tbody>
                            @foreach (var inspect in ViewBag.RenewaInsTask)
                            {

                                <tr>
                                    <td>@inspect.TradingName</td>
                                    <td>@inspect.LLBNumber</td>
                                    <td>@inspect.DateApplied</td>
                                    <td>@inspect.Status </td>
                                    <td>@inspect.Service</td>
                                    <td>@inspect.LicenseType</td>
                                    <td>@inspect.LicenseRegion</td>
                                    @*<td>@inspect.Status</td>*@
                                    <td><a class="btn btn-primary" href="/Verify/Inspect?Id=@inspect.Id&taskId=@inspect.TaskId"> View Inspection</a></td>


                                </tr>

                            }
                        </tbody>



                    </table>
                </div>


            </div>
        </div>

    </div>




    <!-- inspections-->



    <div class="row">
        @*<div class="card">

            <div class="card-body" id="_step1">
                <div class="card-header">

                    <h5 class="card-title"> Inspection Applications</h5>-->
                    @*<button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#addDirector">Add Director </button>
                    *@
                </div>




               @* <div class="row">

                    <table class="table table-responsiveß table-hover table-striped">


                        <thead>
                            <tr>
                                @*renewalinspectiontask.TradingName = outletinfoq.TradingName;
                                    renewalinspectiontask.LLBNumber = appinfoq.LLBNum;
                                    renewalinspectiontask.ApplicationId = applId;
                                    renewalinspectiontask.DateApplied = inspecy.DateApplied;
                                    renewalinspectiontask.Id = inspecy.Id;
                                    renewalinspectiontask.Status = inspecy.Status;
                                    renewalinspectiontask.Service = inspecy.Service;
                                    renewalinspectiontask.LicenseType = licensetype.LicenseName;
                                    renewalinspectiontask.LicenseRegion = licenseregion.RegionName;*@

                                @*<th>Trading Name </th>
                                <th>LLB Number </th>
                                <th>Application Date </th>
                                <th>Status </th>
                                <th>Service </th>
                                <th>License </th>
                                <th>For </th>

                                <th>Action </th>
                            </tr>

                        </thead>
                        <tbody>
                            @foreach (var inspecta in ViewBag.InsTask)
                            {

                                <tr>
                                    <td>@inspecta.TradingName</td>
                                    <td>@inspecta.LLBNumber</td>
                                    <td>@inspecta.DateApplied</td>
                                    <td>@inspecta.Status </td>
                                    <td>@inspecta.Service</td>
                                    <td>@inspecta.LicenseType</td>
                                    <td>@inspecta.LicenseRegion</td>
                                    <td>@inspect.Status</td>
                                    <td><a class="btn btn-primary" href="/Verify/Inspect?Id=@inspecta.Id&taskId=@inspecta.TaskId"> View Inspection</a></td>


                                </tr>

                            }
                        </tbody>



                    </table>
                </div>


            </div>
        </div>*@





        <div class="row">
            <div class="card">

                <div class="card-body" id="_step1">
                    <div class="card-header">

                        <h5 class="card-title">Verification Inspection Applications</h5>
                        @*<button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#addDirector">Add Director </button>
                        *@
                    </div>




                    <div class="row">

                        <table class="table table-responsiveß table-hover table-striped">


                            <thead>
                                <tr>


                                    <th>Trading Name </th>
                                    <th>Inspection Date </th>
                                    <th>Application Date </th>
                                    <th>Status </th>
                                    <th>Service </th>
                                    <th>License </th>
                                    <th>For </th>

                                    <th>Action </th>
                                </tr>

                            </thead>
                            <tbody>
                                @foreach (var inspecta in ViewBag.VerificationInsTask)
                                {

                                    <tr>
                                        <td>@inspecta.TradingName</td>
                                        <td>
                                            @(inspecta.InspectionSchedule == DateTime.MinValue
    ? "N/A"
    : inspecta.InspectionSchedule?.ToString("yyyy-MM-dd"))
                                        </td>

                                        <td>@inspecta.DateApplied</td>
                                        <td>@inspecta.Status </td>
                                        <td>@inspecta.Service</td>
                                        <td>@inspecta.LicenseType</td>
                                        <td>@inspecta.LicenseRegion</td>
                                        @*<td>@inspect.Status</td>*@
                                        <td>
                                            <button class="btn btn-primary" onclick='SetDate("@inspecta.Id", "@Html.Raw(inspecta.TradingName)")' type="button">Set Date</button>
                                        </td>
                                        <td><a class="btn btn-primary" href="/Verify/Inspect?Id=@inspecta.Id&taskId=@inspecta.TaskId"> View Inspection</a></td>


                                    </tr>

                                }
                            </tbody>



                        </table>
                    </div>





                    <div class="row">

                        <table class="table table-responsiveß table-hover table-striped">


                            <thead>
                                <tr>


                                    <th>Trading Name </th>
                                    <th>Inspection Date </th>
                                    <th>Application Date </th>
                                    <th>Status </th>
                                    <th>Service </th>
                                    <th>License </th>
                                    <th>For </th>

                                    <th>Action </th>
                                </tr>

                            </thead>
                            <tbody>
                                @foreach (var inspecta in ViewBag.DirectInsTask)
                                {

                                    <tr>
                                        <td>@inspecta.TradingName</td>
                                        <td>
                                            @(inspecta.InspectionSchedule == DateTime.MinValue
    ? "N/A"
    : inspecta.InspectionSchedule?.ToString("yyyy-MM-dd"))
                                        </td>

                                        <td>@inspecta.DateApplied</td>
                                        <td>@inspecta.Status </td>
                                        <td>@inspecta.Service</td>
                                        <td>@inspecta.LicenseType</td>
                                        <td>@inspecta.LicenseRegion</td>
                                        @*<td>@inspect.Status</td>*@
                                        <td>
                                            <button class="btn btn-primary" onclick='SetDate("@inspecta.Id", "@Html.Raw(inspecta.TradingName)")' type="button">Set Date</button>
                                        </td>
                                        <td><a class="btn btn-primary" href="/Verify/Inspect?Id=@inspecta.Id&taskId=@inspecta.TaskId"> View Inspection</a></td>


                                    </tr>

                                }
                            </tbody>



                        </table>
                    </div>



                </div>
            </div>


        </div>
    </div>

    <script>function SetDate(Id, Name) {

    //alert(Id);
    $('#ApplicationId').val(Id);

    $('#feetitles').html(Name);

    $('#PostFormationModal').modal('show');
        }</script>




    <!-- Basic Modal -->

    <div class="modal fade" id="PostFormationModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title"> Setting Inspection Date</h5> &nbsp;<b><h5 class="modal-title" id="feetitles"></h5></b>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <form action="/Verify/InspectionDate" enctype="multipart/form-data" method="post">
                    <div class="modal-body">
                        <div class="col-md-12">
                            <label for="inputName5" class="form-label">Select Post Formation Process</label>
                            <input type="date" name="inspectionDate" class="form-control" value="" id="InspectionDate">
                            <input type="hidden" name="id" class="form-control" value="" id="ApplicationId" >






                        </div>


                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                        <button type="submit" class="btn btn-primary">Proceed</button>
                    </div>
                </form>
            </div>
        </div>
    </div><!-- End Basic Modal-->



